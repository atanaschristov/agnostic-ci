name: 'CI (validation)'

on:
   push:
      branches: ['**']

jobs:
   lint-and-test:
      runs-on: ubuntu-latest

      strategy:
         fail-fast: false
         matrix:
            node-version: [24.x]

      steps:
         - name: Checkout
           uses: actions/checkout@v4
           with:
              ref: ${{ github.ref }}

         - name: Use Node.js ${{ matrix.node-version }}
           uses: actions/setup-node@v4
           with:
              node-version: ${{ matrix.node-version }}
              cache: npm

         - name: Install dependencies
           run: npm ci

         - name: Run eslint
           run: npx eslint

         - name: Run tests
           run: npm test:coverage -- --ci --reporters=default
